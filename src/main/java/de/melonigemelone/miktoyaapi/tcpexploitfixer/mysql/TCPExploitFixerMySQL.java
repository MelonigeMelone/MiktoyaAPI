package de.melonigemelone.miktoyaapi.tcpexploitfixer.mysql;

import de.melonigemelone.miktoyaapi.lib.database.mysql.MySQL;
import de.melonigemelone.miktoyaapi.mysql.MySQLValues;

public class TCPExploitFixerMySQL extends MySQL {


    public TCPExploitFixerMySQL() {
        super(MySQLValues.HOST.getValue(), MySQLValues.PORT.getValue(), MySQLValues.DATABASE.getValue(), MySQLValues.USER.getValue(), MySQLValues.PASSWORD.getValue());

        createTableIfNotExists("tcpexploitfixer_uuids",
                "  `id` int(11) unsigned NOT NULL AUTO_INCREMENT," +
                        "  `uuid` varchar(64) NOT NULL DEFAULT ''," +
                        "  PRIMARY KEY (`id`)"
        );

        createTableIfNotExists("tcpexploitfixer_connections",
                "  `id` int(11) unsigned NOT NULL AUTO_INCREMENT," +
                        "  `uuid` varchar(64) NOT NULL DEFAULT ''," +
                        "  PRIMARY KEY (`id`)"
        );

    }

    public void addUUID(String uuid) {
        if(!existsUUID(uuid)) {
            insertData("tcpexploitfixer_uuids",
                    "uuid",
                    "'" + uuid + "'");
        }
    }

    public void delUUID(String uuid) {
        deleteDataFromTable("tcpexploitfixer_uuids",
                "uuid = '" + uuid + "'");
    }

    public boolean existsUUID(String uuid) {
        return existsData("tcpexploitfixer_uuids",
                "uuid = '" + uuid + "'");
    }

    public void addConnection(String uuid) {
        if(!existsConnection(uuid)) {
            insertData("tcpexploitfixer_connections",
                    "uuid",
                    "'" + uuid + "'");
        }

    }

    public void delConnection(String uuid) {
        deleteDataFromTable("tcpexploitfixer_connections",
                "uuid = '" + uuid + "'");
    }

    public boolean existsConnection(String uuid) {
        return existsData("tcpexploitfixer_connections",
                "uuid = '" + uuid + "'");
    }

    public void resetAll() {
        resetTable("tcpexploitfixer_uuids");
        resetTable("tcpexploitfixer_connections");
    }
}
